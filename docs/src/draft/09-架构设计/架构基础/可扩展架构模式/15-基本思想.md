> <<从0开始学架构>> 学习笔记Day15：可扩展的基本思想
> 
### 基本思想

可扩展性架构的设计方法很多，但万变不离其宗，所有的可扩展性架构设计，背后的基本思想都可以总结为一个字：拆！

拆，就是将原本大一统的系统拆分成多个规模小的部分，扩展时只修改其中一部分即可，无须整个系统到处都改，通过这种方式来减少改动范围，降低改动风险。

按照不同的思路来拆分软件系统，就会得到不同的架构。常见的拆分思路有如下三种。

- 面向流程拆分：将整个业务流程拆分为几个阶段，每个阶段作为一部分。
- 面向服务拆分：将系统提供的服务拆分，每个服务作为一部分。
- 面向功能拆分：将系统提供的功能拆分，每个功能作为一部分。

### 面向流程拆分

分层架构，将系统拆分成展示层 → 业务层 → 数据层 → 存储层

- 展示层：负责用户页面设计，不同业务有不同的页面。例如，登录页面、注册页面、信息管理页面、安全设置页面等。

- 业务层：负责具体业务逻辑的处理。例如，登录、注册、信息管理、修改密码等业务。

- 数据层：负责完成数据访问。例如，增删改查数据库中的数据、记录事件到日志文件等。

- 存储层：负责数据的存储。例如，关系型数据库 MySQL、缓存系统 Memcache 等


![](https://static001.geekbang.org/resource/image/76/04/76ebf6b2c4efb7b5e1c20ecc1f775904.jpg?wh=2259*1607)

### 面向服务拆分

SOA、微服务架构，将系统拆分为注册、登录、信息管理、安全设置等服务，可以理解服务是一组相似功能的集合

![](https://static001.geekbang.org/resource/image/55/aa/554b3850bbaec4dc73eb7b8fb45047aa.jpg?wh=3629*1832)

### 面向功能拆分

微内核架构，每个服务都可以拆分为更多细粒度的功能

- 注册服务：提供多种方式进行注册，包括手机号注册、身份证注册、学生邮箱注册三个功能。
- 登录服务：包括手机号登录、身份证登录、邮箱登录三个功能。
- 信息管理服务：包括基本信息管理、课程信息管理、成绩信息管理等功能。
- 安全设置服务：包括修改密码、安全手机、找回密码等功能。

![](https://static001.geekbang.org/resource/image/b4/24/b45ddf7991ccdda1b65c557252d4d424.jpg?wh=3590*1827)

# 总结

几个系统架构并不是非此即彼的，而是可以在系统架构设计中进行组合使用的，以学生管理系统为例，我们最终可以这样设计架构：

- 整体系统采用面向服务拆分中的“微服务”架构，拆分为“注册服务”“登录服务”“信息管理服务”“安全服务”，每个服务是一个独立运行的子系统。
- “注册服务”子系统本身又是采用面向流程拆分的分层架构
- “登录服务”子系统采用的是面向功能拆分的“微内核”架构